{% extends 'base.html' %}

{% block media %}
                <script type="text/javascript">
                  require(["jquery", "lib/jquery.colorbox-min"], function($){
                      $(".tech").colorbox({inline:true, width:"50%", href:function(){
                          return $(this).siblings('.video-row').children('.chef-movie-video');
                       }
                    });
                  });
                </script>
{% endblock %}

{% block content %}
<div id="lesson-video-background" class="bordered-row bordered">
        <div id="lessons" class="carousel slide">
            <div class="carousel-inner">
                {% for step in lesson.steps.all %}
                {% if forloop.first %}
                <div class="active item">
                {% else %}
                <div class="item">
                {% endif %}

                    <p class="step-text">{{step.text}}</p>
                    <img class="lesson-pic" src="{{MEDIA_URL}}{{step.picture}}" />
                    <div id="ingredient" class="lesson-panel">
                      {% for ingredient in step.ingredients.all %}
                        <div class='panel-item ingredient'>
                             <div class='lesson-icon-text lesson-icon-ingredients-text'>
                                  <strong>{{ingredient.number}} {{ingredient.measurement}} {{ingredient.name}} {{ingredient.prep}}</strong>
                             </div>
                             <div class='lesson-icon-circle lesson-icon-circle-ingredients'>
                                  <img class='lessonimages' src='../../static/img/icon.pie.png' alt='{{ingredient.name}}' />
                             </div>
                         </div>
                      {% endfor %}
                    </div>


                    <div id="tools" class="lesson-panel">
                      {% for tool in step.tools.all %}
                          <div class='panel-item tool'>
                            <div class='lesson-icon-text lesson-icon-tools-text'>
                              <strong>{{tool.name}}</strong>
                            </div>
                            <div class='lesson-icon-circle lesson-icon-circle-tools'>
                              <img class='lessonimages' src='../../static/img/icon.pie.png' alt='{{tool.name}}' />
                            </div>
                          </div>
                      {% endfor %}
                    </div>

                    {% for tech in step.technique.all %}
                    <a href="#" class="tech">{{tech.title}}</a>
                    <!-- this should likely be moved somewhere else -->
                    <div class="row no-display video-row">
                      <video class="chef-movie-video span6" controls="controls">
	                    <!-- sample videos until we have our actual intro video -->
                        <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" />
                        <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" />
                        <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.webm" />
                        <!-- fallback  -->
                        <p>Your browser does not support HTML5 video.</p>
                      </video>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
            <a class="carousel-control left" href="#lessons" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#lessons" data-slide="next">&rsaquo;</a>
        </div>
</div>

<!-- <div id="lesson-wrapper" class="row"> -->
<!--     <div class="span4 no-margin"> -->
<!--       <div id="step_text" class="lesson-wrapper-overlay"><strong id="step_title"></strong></div> -->

<!--       <div id="ingredient" class="lesson-panel"></div> -->
<!-- 	</div> -->

<!-- 	<div class="span4 pull-right"> -->
<!--       <div id="tools" class="lesson-panel"></div> -->
<!-- 	</div> -->

<!-- 	<div id="step_buttons" class="no-display"> -->
<!--     <a href="#" class="tools">Tools</a> -->
<!--     <a href="#" id="ingredient-1" class="ingredients">Ingredients</a> -->
<!-- 	</div> -->

<!--     <div class="no-display"> -->
<!--     <div id="tools-0"></div> -->
<!--     <div id="ingredient-0"></div> -->
<!--     </div> -->

<!-- </div> -->


{% endblock %}
