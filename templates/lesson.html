{% extends 'base.html' %}

{% block media %}
<script type="text/javascript" >
    pagelogic = function(){
        lessons = require("cs!lessons")
        lesson_data = {
            steps: [
                {% for step in lesson.s %}
                  {
                      title:"{{step.title}}",
                      start_time: {{step.start_time}},
                      {% if step.end_time %}
                      end_time: {{step.end_time}},
                      {% endif %}
                      text: "{{step.text}}",
                      techniques: [
                          {% for tech in step.technique.all %}
                            {

                            },
                          {% endfor %}
                      ],
                      tools: [
                          {% for tool in step.tools.all %}
                          {
                              name: "{{tool.name}}",
                              size: "{{tool.size}}",
                              type: "{{tool.type}}",

                          },
                          {% endfor %}
                      ],
                      ingredients: [
                          {% for ingredient in step.ingredients.all %}
                          {
                              name: "{{ingredient.ingredient.name}}",
                              number: "{{ingredient.number}}",
                              measurement: "{{ingredient.measurement}}",
                              prep: "{{ingredient.prep}}",
                          },
                          {% endfor %}
                      ],
                  },
                {% endfor %}
            ],
        }
        lesson  = lessons.makeLesson("#lesson", lesson_data)
    };
</script>
{% endblock %}

{% block content %}
<div class="bordered-row main bordered">
    <video height="600" width="600" id="lesson">
        {% for video in lesson.videos.all %}
	<source src="{{ video.url }}" type="{{ video.mime }}"></source>
        {% endfor %}
    </video>
    <div id="step"></div>
    <div id="tools"></div>
    <div id="ingredient"></div>
</div>
{% endblock %}
